# Домашнее задание к занятию 4.1 (модуль 3): JVM. Организация памяти, сборщики мусора, VisualVM

## Код для исследования
```java
public class JvmComprehension {
    public static void main(String[] args) {
        int i = 1;                      // 1
        Object o = new Object();        // 2
        Integer ii = 2;                 // 3
        printAll(o, i, ii);             // 4
        System.out.println("finished"); // 7
    }
    private static void printAll(Object o, int i, Integer ii) {
        Integer uselessVar = 700;                   // 5
        System.out.println(o.toString() + i + ii);  // 6
    }
}
```

### Решение
1. Компилируется JvmComprehension.java, он преобразуется в байт-код как файл JvmComprehension.class

1. JVM создается системный загрузчик, загружает с его помощью файл JvmComprehension.class

1. Мета-информация (имя класса, имя его родительского класса, он Class или Interface или Enum, информацию о модификаторах, переменных и методах) о 
class JvmComprehension сохраняется в Metaspace.

1. Отправляется запрос на загрузку class JvmComprehension: запрос на загрузку приходит к Application ClassLoader -> перенаправляется к Platform ClassLoader -> 
перенаправляется к Bootstpap ClassLoader

1. Bootstpap не находит, передает запрос Platform. Тот не находит и передает Application. Класс JvmComprehension загружается с помощью Application ClassLoader, а точнее создается объект типа Class для представления этого класса в куче, т.к в куче храняться именно объекты), и создается ссылка в Stack на адрес расположения объект типа Class в heap

1. Вызывается (исполняется) метод main:  
    - запускается загрузка платформенных классов, т.е. Bootstpap загружает базовые классы в том, числе Object , Integer, System. 
    - в Metaspace сохраняется мета-информация о базовых классах

1. Cоздается фрейм main() в стеке. 
    - во фрейме сохраняется значение примитива int (комментарий 1). 
    - в куче выделяется память под объект класса Object и сохранятся объект типа Object. В стеке (во фрейме) создается ссылка на адрес расположения объект типа Object в heap(комментарий 2)
    - Integer будучи ссылочным типом сохраниться в куче, но ссылка на него создаться в стеке(комментарий 3)

1. Создается фрейм printAll() в стеке (комментарий 4)
    - сохраняется значение примитива int
    - создается ссылка на адрес расположения объект типа Object в heap
    - создается ссылка на адрес расположения объект ii типа Integer в heap 
    - в куче выделяется память под объект класса Integer и сохранятся объект типа Integer. В стеке (во фрейме) создается ссылка на адрес расположения объект типа Integer в heap (комментарий 5)

1. Создается новый фрейм куда передаем значение примитива i и ссылки на объекты типа Object и Integer

1. Создается новый фрейм куда ссылку на объекта типа Object (комментарий 6)

1. По выполнении кода уничтожается фрейм toString()

1. Уничтожается фрейм println()

1. Уничтожается фрейм printAll()

1. Ссылок на объекты больше нет. Срабатывает сборщик мусора.

1. Создается новый фрейм println() (комментарий 7)
    - в куче выделяется память под объект типа String и сохранятся объект типа String, в стеке (во фрейме) создается ссылка на адрес расположения объект в heap

1. По выполнении кода уничтожается фрейм println()

1. Уничтожается фрейм main()
